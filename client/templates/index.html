<!DOCTYPE html>
<html lang="en">
  <head>
    <title>VeraX ‚Äî Deep Fake Detection Dashboard</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <!-- App CSS -->
    <link rel="stylesheet" href="/web_static/index.css" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- App JS -->
    <script defer src="/web_static/index.js"></script>
  </head>
  <body>
    <!-- Boot Sequence Overlay -->
    <div id="bootOverlay" aria-hidden="true">
      <div class="boot-text">Initializing VeraX Core Systems...</div>
      <div class="boot-text">Analyzing Grid Layers...</div>
      <div class="boot-text">Ready for Deployment</div>
    </div>

    <!-- Neon grid background -->
    <div class="grid-bg layer1"></div>
    <div class="grid-bg layer2"></div>
    <div class="grid-bg layer3"></div>

    <!-- Global Loading Overlay -->
    <div id="loadingOverlay" aria-hidden="true">
      <div class="overlay-content">
        <div class="overlay-spinner"></div>
        <h2 class="overlay-text">Initializing VeraX Systems...</h2>
      </div>
    </div>

    <div class="dashboard">
      <!-- Sidebar -->
      <nav class="sidebar">
        <h2 class="logo holo-text">VeraX</h2>
        <ul class="nav-list">
          <li><a href="#" data-target="resultsPanel">Results</a></li>
          <li><a href="#" data-target="logsPanel">Logs</a></li>
          <li><a href="#" data-target="analyticsPanel">Analytics</a></li>
          <li><a href="#" data-target="featuresPanel">Features</a></li>
        </ul>
      </nav>

      <!-- Main -->
      <div class="main">
        <header class="topbar">
          <h1 class="glitch-text bordered-title">Deep Fake Detection Dashboard</h1>
        </header>

        <section class="content">
          <!-- RESULTS -->
          <div id="resultsPanel" class="panel active">
            <div class="container-fluid">
              <div class="row g-3">
                {% for image in image_list %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                  <div class="card verax-card">
                    <img
                      src="{{ url_for('static', filename=image.image_url) }}"
                      alt="Image to check"
                      class="img-fluid verax-img"
                    />
                    <!-- Detect button -->
                    <div class="text-center mt-2">
                      <button class="btn btn-primary holo-button"
                        onclick="checkImage('{{ image.image_full_path }}', '{{ image.image_url }}')">
                        Detect
                      </button>
                    </div>
                    <!-- Prediction box -->
                    <div id="outer-{{ image.image_url }}" class="prediction-box mt-2">
                      <div><strong>Predicted:</strong> <span id="predicted-label-{{ image.image_url }}"></span></div>
                      <div><strong>Confidence:</strong> <span id="confidence-{{ image.image_url }}"></span></div>
                      <div class="confidence-bar"><div id="confidence-fill-{{ image.image_url }}"></div></div>
                      <div><strong>Fake:</strong> <span id="fake-prob-{{ image.image_url }}"></span></div>
                      <div><strong>Real:</strong> <span id="real-prob-{{ image.image_url }}"></span></div>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>

          <!-- LOGS -->
          <div id="logsPanel" class="panel">
            <div class="container py-4">
              <div class="card verax-panel">
                <div class="panel-header">
                  <h3 class="panel-title">Logs Console</h3>
                  <span class="panel-subtitle">System events & detection traces</span>
                </div>
                <div class="panel-body">
                  <!-- Pie chart -->
                  <div class="logs-chart-container mb-3">
                    <canvas id="logsPieChart" width="400" height="400"></canvas>
                  </div>
                  <!-- Console log -->
                  <pre id="logOutput" class="logs">[System] Awaiting events...</pre>
                </div>
              </div>
            </div>
          </div>

          <!-- ANALYTICS -->
          <div id="analyticsPanel" class="panel">
            <div class="container py-4">
              <div class="card verax-panel">
                <div class="panel-header">
                  <h3 class="panel-title">Analytics Core</h3>
                  <span class="panel-subtitle">Accuracy trends & confidence distribution</span>
                </div>
                <div class="panel-body">
                  <!-- Bar chart -->
                  <div class="analytics-chart-container mb-4">
                    <canvas id="analyticsBarChart" width="600" height="400"></canvas>
                  </div>
                  <!-- Grid table -->
                  <div class="analytics-grid-container">
                    <table id="analyticsGrid" class="table table-dark table-striped table-bordered">
                      <thead>
                        <tr>
                          <th>Image ID</th>
                          <th>Predicted Label</th>
                          <th>Confidence</th>
                          <th>Fake %</th>
                          <th>Real %</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- FEATURES -->
          <div id="featuresPanel" class="panel">
            <div class="container py-4">
              <!-- README -->
              <div class="readme-container mb-4">
                <h2 class="readme-title">üìò VeraX README</h2>
                <p class="readme-intro">
                  VeraX is a deep fake detection dashboard built for forensic credibility and cinematic clarity.
                  It combines AI detection, neon visualization, and enterprise‚Äëgrade logging to empower users.
                </p>
                <h3>üîç Results</h3>
                <p>Run detection on images. Each card shows predicted label, confidence, and probabilities.</p>
                <h3>üìä Logs</h3>
                <p>Every detection is recorded with a timestamp. The Logs panel displays a pie chart of Fake vs Real probabilities and a console trace.</p>
                <h3>üìà Analytics</h3>
                <p>Detections feed into a bar chart and grid table. Confidence scores and probabilities are tracked across all images.</p>
                <h3>‚öôÔ∏è Features</h3>
                <p>This README explains VeraX‚Äôs architecture, workflow, and roadmap. It is fully customizable with themes, extensions, and integrations.</p>
                <h3>üß† How It Works</h3>
                <ul>
                  <li>Upload or load images (supports large sets like 1090 images).</li>
                  <li>Click <strong>Detect</strong> to run AI classification.</li>
                  <li>Results update in real‚Äëtime with confidence and probabilities.</li>
                  <li>Logs capture pie charts and console entries.</li>
                  <li>Analytics builds bar charts and grid summaries.</li>
                </ul>
                <h3>üöÄ Built by Khadija</h3>
                <p>VeraX blends sci‚Äëfi aesthetics with forensic rigor. It is designed for judges, users, and leaders who demand legendary results.</p>
              </div>

              <!-- Feature cards (unchanged) -->
              <div class="features-grid">
                {% for feature in feature_list %}
                <div class="feature-card">
                  <div class="feature-header">
                    <h4>{{ feature.title }}</h4>
                    <span>{{ feature.subtitle }}</span>
                  </div>
                  <p>{{ feature.description }}</p>
                  <div class="feature-actions">
                    <button class="ghost-btn" disabled>{{ feature.button }}</button>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </body